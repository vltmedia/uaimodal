
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
      
      
      
      <link rel="icon" href="../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.6.0, mkdocs-material-9.5.33">
    
    
      
        <title>Deploy Module for uaimodal Python Package - UAI Modal</title>
      
    
    
      <link rel="stylesheet" href="../assets/stylesheets/main.3cba04c6.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
      <link rel="stylesheet" href="../assets/_mkdocstrings.css">
    
    <script>__md_scope=new URL("..",location),__md_hash=e=>[...e].reduce((e,_)=>(e<<5)-e+_.charCodeAt(0),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    
  </head>
  
  
    <body dir="ltr">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#deploy-module-for-uaimodal-python-package" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

<header class="md-header" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href=".." title="UAI Modal" class="md-header__button md-logo" aria-label="UAI Modal" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54Z"/></svg>

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2Z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            UAI Modal
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Deploy Module for uaimodal Python Package
            
          </span>
        </div>
      </div>
    </div>
    
    
      <script>var media,input,key,value,palette=__md_get("__palette");if(palette&&palette.color){"(prefers-color-scheme)"===palette.color.media&&(media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']"),palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent"));for([key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script>
    
    
    
      <label class="md-header__button md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
      </label>
      <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41Z"/></svg>
        </button>
      </nav>
      
        <div class="md-search__suggest" data-md-component="search-suggest"></div>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" tabindex="0" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
            
<nav class="md-tabs" aria-label="Tabs" data-md-component="tabs">
  <div class="md-grid">
    <ul class="md-tabs__list">
      
        
  
  
  
    <li class="md-tabs__item">
      <a href=".." class="md-tabs__link">
        
  
    
  
  Home

      </a>
    </li>
  

      
        
  
  
  
    <li class="md-tabs__item">
      <a href="../deploy/" class="md-tabs__link">
        
  
    
  
  Deploy

      </a>
    </li>
  

      
        
  
  
  
    <li class="md-tabs__item">
      <a href="../jobs/" class="md-tabs__link">
        
  
    
  
  Jobs

      </a>
    </li>
  

      
        
  
  
  
    <li class="md-tabs__item">
      <a href="../utils/" class="md-tabs__link">
        
  
    
  
  Utils

      </a>
    </li>
  

      
    </ul>
  </div>
</nav>
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    


  


  

<nav class="md-nav md-nav--primary md-nav--lifted md-nav--integrated" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href=".." title="UAI Modal" class="md-nav__button md-logo" aria-label="UAI Modal" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54Z"/></svg>

    </a>
    UAI Modal
  </label>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href=".." class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Home
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../deploy/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Deploy
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../jobs/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Jobs
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../utils/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Utils
  </span>
  

      </a>
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  


<h1 id="deploy-module-for-uaimodal-python-package">Deploy Module for uaimodal Python Package</h1>
<h2 id="overview">Overview</h2>
<p>The <code>Deploy</code> module is part of the <code>uaimodal</code> Python package and provides a suite of methods to assist with deploying and managing containerized applications. This module is designed to handle various tasks such as installing Python dependencies, copying files, downloading resources, and configuring containers.</p>
<h2 id="installation">Installation</h2>
<p>To install the <code>uaimodal</code> package, you can use pip:</p>
<pre><code class="language-bash">pip install uaimodal
</code></pre>
<h2 id="features">Features</h2>
<p>The <code>Deploy</code> module includes the following key methods:</p>
<h3 id="1-installpythonrequirementslocallocalpath-str">1. <code>installPythonRequirementsLocal(localPath: str)</code></h3>
<p>Installs Python requirements from a local <code>requirements.txt</code> file.</p>
<p><strong>Arguments:</strong>
- <code>localPath (str)</code>: The path to the local <code>requirements.txt</code> file.</p>
<p><strong>Returns:</strong>
- Updated Docker image with installed requirements.</p>
<h3 id="2-installpythonrequirementsserverserverpath-str-rootrequirementstxt">2. <code>installPythonRequirementsServer(serverPath: str = "/root/requirements.txt")</code></h3>
<p>Installs Python requirements from a server <code>requirements.txt</code> file.</p>
<p><strong>Arguments:</strong>
- <code>serverPath (str, optional)</code>: The path to the <code>requirements.txt</code> file on the server.</p>
<p><strong>Returns:</strong>
- Updated Docker image with installed requirements.</p>
<h3 id="3-copylocalfileanddirectoriesitems-list">3. <code>copyLocalFileAndDirectories(items: list)</code></h3>
<p>Copies local files and directories to the image.</p>
<p><strong>Arguments:</strong>
- <code>items (list)</code>: A list of directories to copy, each containing an input and output path.</p>
<p><strong>Returns:</strong>
- Updated Docker image with copied files and directories.</p>
<h3 id="4-copylocalfilesfiles-list">4. <code>copyLocalFiles(files: list)</code></h3>
<p>Copies local files to the specified image.</p>
<p><strong>Arguments:</strong>
- <code>files (list, optional)</code>: A list of files and directories to be copied.</p>
<p><strong>Returns:</strong>
- Updated Docker image with copied files.</p>
<h3 id="5-downloadfileurl-str-destination-str">5. <code>downloadFile(url: str, destination: str)</code></h3>
<p>Downloads a file from a URL and saves it to the specified destination.</p>
<p><strong>Arguments:</strong>
- <code>url (str)</code>: The URL of the file to download.
- <code>destination (str)</code>: The destination path where the file will be saved.</p>
<p><strong>Returns:</strong>
- Updated Docker image with the downloaded file.</p>
<h3 id="6-unzipfilesource-str-destination-str">6. <code>unzipFile(source: str, destination: str)</code></h3>
<p>Unzips a file from a source path to a destination path.</p>
<p><strong>Arguments:</strong>
- <code>source (str)</code>: The path to the zip file.
- <code>destination (str)</code>: The path where the files will be extracted.</p>
<p><strong>Returns:</strong>
- Updated Docker image with the unzipped files.</p>
<h3 id="7-installgitmodulerepo_url-str-destination-str">7. <code>installGitModule(repo_url: str, destination: str)</code></h3>
<p>Clones and installs a Git module.</p>
<p><strong>Arguments:</strong>
- <code>repo_url (str)</code>: The URL of the Git repository.
- <code>destination (str)</code>: The path where the module will be installed.</p>
<p><strong>Returns:</strong>
- Updated Docker image with the installed Git module.</p>
<h3 id="8-initcontainerappname-str-various-options">8. <code>initContainer(appName: str, ... various options ...)</code></h3>
<p>Initializes a container with the given parameters, including optional file downloads, unzipping, Git module installations, and Python requirements installations.</p>
<p><strong>Arguments:</strong>
- <code>appName (str)</code>: The name of the application to deploy.
- <code>python_version (str, optional)</code>: The Python version to use in the container.
- <code>firebaseServiceJson (str, optional)</code>: Path to Firebase service JSON file.
- <code>cmake (bool, optional)</code>: Whether to install CMake.
- <code>cudaVersion (str, optional)</code>: CUDA version to install.
- <code>filesToDownload (list, optional)</code>: List of files to download.
- <code>filesToUnzip (list, optional)</code>: List of files to unzip.
- <code>gitModules (list, optional)</code>: List of Git modules to install.
- <code>requirementsLocal (str, optional)</code>: Path to local Python requirements file.
- <code>requirementsServer (str, optional)</code>: Path to server Python requirements file.
- <code>postFunctions (list, optional)</code>: List of functions to run post-initialization.
- <code>pytorchCustom (str, optional)</code>: Path to custom PyTorch installation.
- <code>ffmpeg (bool, optional)</code>: Whether to install FFmpeg.
- <code>newDirectories (list, optional)</code>: List of new directories to create in the container.</p>
<p><strong>Returns:</strong>
- Initialized <code>UAIModal</code> object.</p>
<h2 id="usage">Usage</h2>
<p>To use the <code>Deploy</code> module, first import it and then initialize it with the desired configuration:</p>
<pre><code class="language-python">import uaimodal

uModal = uaimodal.initUAIContainer(&quot;testToKill-01&quot;, python_version= &quot;3.11&quot;,firebaseServiceJson= &quot;user.json&quot;,cudaVersion=12.4, ffmpeg=True, newDirectories=[&quot;/root/datasets/input&quot;])
uModal.installGitModule( &quot;https://github.com/OpenTalker/video-retalking&quot;,&quot;/root&quot;)
uModal.downloadFile( &quot;http://commondatastorage.googleapis.com/gtv-videos-bucket/sample/BigBuckBunny.mp4&quot;, &quot;/root/BigBuckBunny.mp4&quot; )
uModal.copyLocalFileAndDirectories([[&quot;checkpoints.zip&quot;, &quot;/root/checkpoints.zip&quot;]])
uModal.unzipFile( &quot;/root/checkpoints.zip&quot;, &quot;/root&quot;)
uModal.installCMake()
uModal.installPythonRequirementsServer( &quot;/root/requirements.txt&quot;)
uModal.copyLocalFileAndDirectories( [
    [&quot;usersilence.wav&quot;, &quot;/root/usersilence.wav&quot;],
    [&quot;short.wav&quot;, &quot;/root/short.wav&quot;],
    [&quot;testVideo.mp4&quot;, &quot;/root/testVideo.mp4&quot;]
    [&quot;extract_kp_videos.py&quot;, &quot;/root/third_part/face3d/extract_kp_videos.py&quot;]
                                ])
# Always call this to apply the image to the application
uModal.applyAppImage()

# These are the modal objects ready to be consumed.
app = uModal.app
image = uModal.image

</code></pre>
<p>This will set up your container with the specified Python dependencies and files.</p>
<h2 id="license">License</h2>
<p>This project is licensed under the MIT License.</p>
<h2 id="contributing">Contributing</h2>
<p>Contributions are welcome! Please feel free to submit a Pull Request.</p>
<h2 id="contact">Contact</h2>
<p>For any questions or issues, please contact the maintainer at <code>support@uaimodal.io</code>.</p>












                
              </article>
            </div>
          
          
<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
          <button type="button" class="md-top md-icon" data-md-component="top" hidden>
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8v12Z"/></svg>
  Back to top
</button>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    <script id="__config" type="application/json">{"base": "..", "features": ["navigation.tabs", "navigation.sections", "toc.integrate", "navigation.top", "search.suggest", "search.highlight", "contant.tabs.link", "contant.code.annotation", "contant.code.copy"], "search": "../assets/javascripts/workers/search.b8dbb3d2.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}}</script>
    
    
      <script src="../assets/javascripts/bundle.af256bd8.min.js"></script>
      
    
  </body>
</html>